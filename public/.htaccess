# DISABLE CACHING

<IfModule mod_headers.c>
ExpiresActive Off
</IfModule>

# dalsi info a priklady: https://kb.wedos.com/cs/webhosting/htaccess/htaccess-na-webhostingu

RewriteEngine On

# cele domeny (aliasy)

RewriteCond %{REQUEST_URI} !^domains/
RewriteCond %{REQUEST_URI} !^/domains/
RewriteCond %{HTTP_HOST} ^(www\.)?(._)$
RewriteCond %{DOCUMENT_ROOT}/domains/%2 -d
RewriteRule (._) domains/%2/$1 [DPI]

# subdomeny (s nebo bez www na zacatku)

RewriteCond %{REQUEST_URI} !^subdom/
RewriteCond %{REQUEST_URI} !^/subdom/
RewriteCond %{HTTP_HOST} ^(www\.)?(._)\.([^\.]_)\.([^\.]_)$
RewriteCond %{DOCUMENT_ROOT}/subdom/%2 -d
RewriteRule (._) subdom/%2/$1 [DPI]

# aliasy - spravne presmerovani pri chybejicim /

RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^domains/[^/]+/(.+[^/])$ /$1/ [R]

# subdomeny - spravne presmerovani pri chybejicim /

RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^subdom/[^/]+/(.+[^/])$ /$1/ [R]

# presmerovani http na https

RewriteCond %{HTTPS} off [NC]
RewriteRule ^(.\*)$ https://%{HTTP_HOST}%{REQUEST_URI} [R=301,L]

# presmerovani www na non-www

RewriteCond %{HTTP_HOST} ^www\.(._)$ [NC]
RewriteRule ^(._)$ https://%1/$1 [R=301,L]

# 404 page
ErrorDocument 404 /404.html
